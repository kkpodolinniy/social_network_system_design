### Функциональные требования
- Просмотр ленты с постами
- Публикация поста - добавить описание и фотографии о путешествии, добавить геолокацию (место)
- Возможность лайкнуть чужой пост
- Возможность комментировать чужой пост
- Возможность подписаться на автора поста
- Поиск по постов по геопозиции/ местам
- Просмотр списка пользователей (подписок)
- Возможность просмотреть ленту других путешественников
- Возможность просмотреть ленту пользователя, основанную на подписках
### Нефункциональные требования

#### Аудитория приложения
- **DAU** -- 12 000 000 (12 млн. уникальных пользователей в день через год с небольшим запасом, учитывая скорость роста)
- **Аудитория** только из стран СНГ
- **Целевая аудитория** - путешественники, люди которые отдают предпочтение активному образу жизни и путешествиям
- **Трафик** - мобильный и десктопный. Учитывая, что приложение нацелено на аудиторию социально активных людей, соотношение мобильного трафика к десктопному будет примерно 80/20 (80% приходится на мобильные устройства)

#### Особенности приложения
- **Данные** храним всегда, так как нужно иметь возможность посмотреть посты которые публиковались любое количество лет в прошлом.
- **Доступность** 99.95%, среднее время простоя в год до 4х часов.
- **Сезонность** у приложения отсутствует
- Тайминги:
    - 1 секунда на подгрузку бесконечной ленты при скролле (infinity scroll)
    - 0.5 секунд на лайк и пост комментария + optimistic update на фронте
    - 1 секунда на создание нового поста
    - 1.5 секунды на поиск по геоточке
- Активность пользователей:
    - 40 лайков в сутки
    - **2** комментариев в сутки
    - Публикация **1** пост в день
    - **2** подписки в день
    - **1** - просмотр списка пользователей
    - **0.5** поиска по локации в день
    - просмотр **400** постов в день
- Лимиты:
    - 1000 лайков в день
    - 200 комментариев в день
    - 200 подписок в день.
    - Image size < 20 mb, перед сохранением сжимаем до 800кб
    - Количество фотографий в одном посте - до 5 шт.
    - При бесконечной подгрузкеп постов в ленте (infinity scroll) - 20 постов в батче, после чего подгружаются новые
    - Можно подписаться на 5000 человек

### Расчет нагрузки

#### RPS

##### Посты
- Read: 12 000 000 * 20 (400 постов по 20 постов в пачке) / 86 400  = 2778
- Write 12 000 000 * 1 / 86 400 = 138

##### Лайки
- Read: приходит вместе с постом
- Write: 12 000 000 * 40 / 86 400  = 5600

##### Комментарии
- Read: приходит вместе с постом
- Write: 12 000 000 * 2 / 86 400  = 278

##### Подписка/отписка
- Read: Просматриваем вместе со списком пользователей
- Write: 12 000 000 * 2 / 86 400  = 278

##### Просмотр списка пользователей
- Read: 12.000.000 * 1  / 86400 = 138

#### Traffic

##### Посты
```json
{
"id": 123,
"description": "abcd", 
"images": ["blob", "blob", "blob", "blob", "blob"],
"comments": [
	{"user": "Ivan",
	"comment": "Trulaleo Trulala"	
	}
],
"isLiked" : true, 
"likes": 1235
}
```

###### Read
- **JSON метаданные**: 300 байт
- **5 изображений × 800 KB**: 4,000 KB = 4 MB
- **HTTP overhead**: 2 KB
- **Итого**: **~4.002 MB на запрос**

**Traffic** = 138 RPS × 4.002 MB = 552.3 MB/сек

###### Write

**JSON структура:**

- **id**: ~10 байт
- **description**: ~50 байт (средний текст поста)
- **images**: 5 URL × ~45 байт = **225 байт**
- **comments**: 3 комментария × ~50 байт = **150 байт**
- **остальные поля**: ~100 байт
- **JSON форматирование**: ~50 байт

20 постов × 585 байт = 11,700 байт = ~11.4 KB + HTTP headers (~2 KB) = ~13.4 KB на батч)

**Traffic** = 2,778 RPS × 13.4 KB = 37.2 MB/сек

##### Комментарии
###### Write

```json
{ "user": "Ivan", "comment": "Trulaleo Trulala", "postId": 123456, "timestamp": "2025-01-30T12:00:00Z" }
```

**Traffic** = 278 RPS × 1.87 KB = 520 KB/сек = 0.52 MB/сек

##### Like - лайкаем посты

```json
{
"postId": 123456,
"userId": 789012,
"action": "like",
"timestamp": "2025-01-30T12:00:00Z"
}
```

Размеры: 70 байт + 1.35 KB (http headers и тд) = ~1.42 KB

###### Write
**Traffic** = 5,600 RPS × 1.42 KB = 7,952 KB/сек = 7.95 MB/сек



##### Список пользователей
```json
{
  "id": 789012,
  "firstName": "Alexander",
  "lastName": "Petrov",
  "username": "alex_petrov_2024",
  "avatar": "https://cdn.myapp.com/avatars/abc123.jpg",
  "isSubscribed": true,
  "subscription": false,
  "isOnline": true,
  "followersCount": 1250,
  "mutualFriends": 15,
  "lastSeen": "2025-01-30T11:45:00Z"
}
```


###### Read
300 пользователей × 210 байт = 63,000 байт = 63 KB + JSON массив overhead (~500 байт) = ~63.5 KB + HTTP headers (~2 KB) = ~65.5 KB на запрос

**Traffic** = 138 RPS × 65.5 KB = 9,039 KB/сек = 9.04 MB/сек